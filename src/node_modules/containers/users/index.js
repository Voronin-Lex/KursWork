import React, {Component} from 'react';
import {connect} from 'react-redux'
import {Link} from "react-router";
import {
    removeUser,
    changeUserPassword
} from 'actions'


class UsersPage extends Component {
    constructor(props) {
        super(props);
    }

    renderUser(user, index){
        const {removeUser} = this.props;
        const {changeUserPassword} = this.props;
        return (
            <tr key={index}>
                <td className="user">
                    <div className="user-info">
                        <div className="user-name"> {user.username} </div>
                    </div>
                </td>
                <td>
                    <input type="text" placeholder="Password..."  value={user.password}
                           onChange={(event) => changeUserPassword(user.id, event.target.value)}
                    />
                </td>
                <td>
                    <span
                        className='delete-cart'
                        onClick={() => removeUser(user.id)}
                    />
                </td>
            </tr>
        )
    }

    render(){
        const {users} = this.props;
        console.log(users);
        return (
            <div className="users">
                <input type="text" placeholder="Search..." className="search-field"
                       onChange=""/>
                <div className='table-responsive'>
                    <table className='table-bordered table-striped table-condensed cf'>
                        <tbody>
                            {users.map((user, index) => this.renderUser(user, index))}
                        </tbody>
                    </table>
                </div>

                <br/>
                <br/>
                <Link
                    to={`/add_user`}
                    className='btn btn-default'
                >
                    Добавить нового пользователя
                </Link>

            </div>
        );
    }
}


const mapStateToProps = (state, ownProps) => {
    return {
        users: state.users
    }
};

const mapDispatchToProps = {
    removeUser,
    changeUserPassword
};

export default connect(mapStateToProps, mapDispatchToProps)(UsersPage)