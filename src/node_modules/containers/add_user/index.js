import React, {Component} from 'react';
import {Users, Admin} from '../../api/mockCredentials'
import {connect} from 'react-redux'
import {Link} from "react-router";
import {
    addUser
} from 'actions'

class AddUser extends Component {
    constructor(props) {
        super(props);
        this.handleChange = this.handleChange.bind(this);
        let initialState = {username: '', password: ''};
        this.state = {credentials: initialState}
    }


    handleChange(event) {
        let id = event.target.id;
        let newState = Object.assign({}, this.state.credentials);
        newState[id] = event.target.value;
        this.setState({credentials: newState});
    }

    render() {
        const {addUser} = this.props;
        return (
            <form className='authForm' onSubmit={() => addUser(this.state.credentials.username,
                                                        this.state.credentials.password)}>
                <div className='form-group'>
                    <label htmlFor='login'>Login</label>
                    <input type='login' className='form-control'
                           name='login' placeholder="username"
                           value={this.state.credentials.username}
                           id = 'username'
                           onChange={this.handleChange}/>
                </div>
                <div className='form-group'>
                    <label htmlFor='password'>Password</label>
                    <input type='password' className='form-control'
                           name='password' placeholder="password"
                           value={this.state.credentials.password}
                           id = 'password'
                           onChange={this.handleChange}/>
                </div>
                <button type='submit' className='btn btn-primary'>
                    Добавить нового пользователя
                </button>
            </form>
        )
    }
}

const mapStateToProps = (state, ownProps) => {
    return {};
};

const mapDispatchToProps = {
    addUser
};

export default connect(mapStateToProps, mapDispatchToProps)(AddUser)