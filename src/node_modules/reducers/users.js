import {Users} from '../api/mockCredentials'
import {REMOVE_USER, ADD_USER, CHANGE_USER_PASSWORD} from "actionTypes";


const initialState = Users;



export default (state = initialState, {type, payload}) => {
    switch (type) {
        case REMOVE_USER:
            return state.filter(user => user.id !== payload);

        case CHANGE_USER_PASSWORD:
            let editedState = {};
            editedState = state.map(user => {
                if (user.id === payload.id) {
                    let editUser = {};
                    console.log("user.password = ", user.password);
                    Object.assign(editUser, {
                        id: user.id,
                        username: user.username,
                        password: payload.newPassword
                    });
                    return editUser;
                }
                else {
                    return user;
                }
            });
            return editedState;

        case ADD_USER:
            //TODO: при добавлении в БД, вероятно, не нужно
            console.log("add_user= ", payload);
            const newId = state[state.length-1].id + 1;
            let newState = {
                ...state, [state.length]: {
                    id: newId,
                    username: payload.username,
                    password: payload.password
                }};
            console.log("newState= ", newState);
            return {
              newState
            };
        default:
            return state
    }
}