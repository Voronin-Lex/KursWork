import React, {Component} from 'react';
import {Users, Admin} from '../../api/mockCredentials'

export default class Form extends Component {
    constructor(props) {
        super(props);
        this.handleSubmit = this.handleSubmit.bind(this);
        this.handleChange = this.handleChange.bind(this);
        let initialState = {username: '', password: ''};
        this.state = {credentials: initialState}
    }

    handleSubmit(event) {
        event.preventDefault();
        if (event.target.username.value === 'user' && event.target.password.value==='user'){
            setTimeout(() => window.location.assign("/home"), 300);
            return
        }

        if (event.target.username.value === 'admin' && event.target.password.value==='admin'){
            setTimeout(() => window.location.assign("/admin"), 300);
            return
        }

        alert("Неверный логин или пароль")
    }

    handleChange(event) {
        let id = event.target.id;
        let newState = Object.assign({}, this.state.credentials);
         newState[id] = event.target.value;
         this.setState({credentials: newState});
    }

    render() {
        return (
            <form className='authForm' onSubmit={this.handleSubmit}>
                <h2>Welcome to the shop!</h2>
                <div className='form-group'>
                    <label htmlFor='login'>Login</label>
                    <input type='login' className='form-control'
                           name='login' placeholder="username"
                           value={this.state.credentials.username}
                           id = 'username'
                           onChange={this.handleChange}/>
                </div>
                <div className='form-group'>
                    <label htmlFor='password'>Password</label>
                    <input type='password' className='form-control'
                           name='password' placeholder="password"
                           value={this.state.credentials.password}
                           id = 'password'
                           onChange={this.handleChange}/>
                </div>
                <button type='submit' className='btn btn-primary'>
                    Sign in
                </button>
            </form>
        )
    }
}